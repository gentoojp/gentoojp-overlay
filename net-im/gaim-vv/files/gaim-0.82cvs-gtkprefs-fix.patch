Index: src/gtkprefs.c
===================================================================
RCS file: /cvsroot/gaim/gaim/src/gtkprefs.c,v
retrieving revision 1.199
diff -u -p -r1.199 gtkprefs.c
--- src/gtkprefs.c	10 Aug 2004 12:57:41 -0000	1.199
+++ src/gtkprefs.c	17 Aug 2004 00:42:38 -0000
@@ -523,7 +523,7 @@ GtkTreePath *theme_refresh_theme_list()
 
 void theme_install_theme(char *path, char *extn) {
 #ifndef _WIN32
-	gchar *command;
+	gchar *command, *escaped;
 #endif
 	gchar *destdir;
 	gchar *tail;
@@ -544,7 +544,9 @@ void theme_install_theme(char *path, cha
 	 * other platforms, if need be */
 	if (!g_ascii_strcasecmp(tail, ".gz") || !g_ascii_strcasecmp(tail, ".tgz")) {
 #ifndef _WIN32
-		command = g_strdup_printf("tar > /dev/null xzf \"%s\" -C %s", path, destdir);
+		escaped = g_shell_quote(path);
+		command = g_strdup_printf("tar > /dev/null xzf %s -C %s", escaped, destdir);
+		g_free(escaped);
 #else
 		if(!wgaim_gz_untar(path, destdir)) {
 			g_free(destdir);
