diff -uNr netmaj.org/Makefile netmaj/Makefile
--- netmaj.org/Makefile	Mon Nov 11 23:43:22 1996
+++ netmaj/Makefile	Fri Apr 28 20:53:52 2000
@@ -27,28 +27,28 @@
 
 SHELL=/bin/sh
 # Install Directory
-LIBDIR=/usr/local/lib/netmaj
-BINDIR=/usr/local/bin
+LIBDIR=/usr/games/lib/netmaj
+BINDIR=/usr/games
 PERL=/usr/bin/perl
 
 STD_CFLAGS=-I. -Ilib -DNETMAJ_LIB=\"$(LIBDIR)\" 
 
 # for 386BSD,FreeBSD,NetBSD...
-CC=gcc
-OS_CFLAGS= -O -g -DUSE_SGTTY -DUSE_FWOPEN -DUSE_TERMCAP -DHAVE_GETTIMEOFDAY
-RANLIB=ranlib
-LIBS= 
-CURSES= -lcurses -ltermcap
-LDFLAGS =  -Llib 
-
-# for linux
-#CC=cc
-#OS_CFLAGS= -O -DUSE_TERMIOS -DUSE_TERMCAP -DDEF_OPTARG -DHAVE_GETTIMEOFDAY
+#CC=gcc
+#OS_CFLAGS= -O -g -DUSE_SGTTY -DUSE_FWOPEN -DUSE_TERMCAP -DHAVE_GETTIMEOFDAY
 #RANLIB=ranlib
-#LIBS = 
-#CURSES= lib/libcurses.a -ltermcap
+#LIBS= 
+#CURSES= -lcurses -ltermcap
 #LDFLAGS =  -Llib 
 
+# for linux
+CC=cc
+OS_CFLAGS= -O -DUSE_TERMIOS -DUSE_TERMCAP -DDEF_OPTARG -DHAVE_GETTIMEOFDAY
+RANLIB=ranlib
+LIBS = 
+CURSES= lib/libcurses.a -ltermcap
+LDFLAGS =  -Llib 
+
 # for nec ews
 ##CC=/usr/abiccs/bin/cc -ZXNd=5000
 #CC=gcc -ansi
@@ -179,35 +179,35 @@
 	chmod 755 player_info
 
 install: netmaj player_info
-	-if test ! -d ${BINDIR}; then \
-		mkdir ${BINDIR}; fi
-	-if test ! -d ${LIBDIR}; then \
-		mkdir ${LIBDIR}; fi
+	-if test ! -d $(DESTDIR)${BINDIR}; then \
+		mkdir $(DESTDIR)${BINDIR}; fi
+	-if test ! -d $(DESTDIR)${LIBDIR}; then \
+		mkdir $(DESTDIR)${LIBDIR}; fi
 	-./server_kill
-	cp server client auto server_kill player_info $(LIBDIR)
-	cp proxyserver inputserver proxyclient $(LIBDIR)
-	cp netmaj.hlp $(LIBDIR)
-	cp netmaj netmaj1 plview $(BINDIR)
+	cp server client auto server_kill player_info $(DESTDIR)$(LIBDIR)
+	cp proxyserver inputserver proxyclient $(DESTDIR)$(LIBDIR)
+	cp netmaj.hlp $(DESTDIR)$(LIBDIR)
+	cp netmaj netmaj1 plview $(DESTDIR)$(BINDIR)
 	-if test -d xui; then \
 	(cd xui; make install CC="$(CC)" OS_CFLAGS="$(OS_CFLAGS)" \
-	RANLIB="$(RANLIB)" LIBS="$(LIBS)" LIBDIR="$(LIBDIR)" \
-	BINDIR="$(BINDIR)" \
+	RANLIB="$(RANLIB)" LIBS="$(LIBS)" LIBDIR="$(DESTDIR)$(LIBDIR)" \
+	BINDIR="$(DESTDIR)$(BINDIR)" \
 	); fi
 
 install-remote: netmaj server server_kill auto proxyclient
-	-if test ! -d ${BINDIR}; then \
-		mkdir ${BINDIR}; fi
-	-if test ! -d ${LIBDIR}; then \
-		mkdir ${LIBDIR}; fi
-	cp server auto server_kill proxyclient $(LIBDIR)
-	cp netmaj $(BINDIR)
+	-if test ! -d $(DESTDIR)${BINDIR}; then \
+		mkdir $(DESTDIR)${BINDIR}; fi
+	-if test ! -d $(DESTDIR)${LIBDIR}; then \
+		mkdir $(DESTDIR)${LIBDIR}; fi
+	cp server auto server_kill proxyclient $(DESTDIR)$(LIBDIR)
+	cp netmaj $(DESTDIR)$(BINDIR)
 
 install-pf:
-	cp *.pf $(LIBDIR)
+	cp *.pf $(DESTDIR)$(LIBDIR)
 	-if test -d xui; then \
 	(cd xui; make install-pf CC="$(CC)" OS_CFLAGS="$(OS_CFLAGS)" \
-	RANLIB="$(RANLIB)" LIBS="$(LIBS)" LIBDIR="$(LIBDIR)" \
-	BINDIR="$(BINDIR)" \
+	RANLIB="$(RANLIB)" LIBS="$(LIBS)" LIBDIR="$(DESTDIR)$(LIBDIR)" \
+	BINDIR="$(DESTDIR)$(BINDIR)" \
 	); fi
 
 clean:
diff -uNr netmaj.org/cui.c netmaj/cui.c
--- netmaj.org/cui.c	Wed Aug  7 02:24:30 1996
+++ netmaj/cui.c	Fri Apr 28 21:06:52 2000
@@ -576,8 +576,11 @@
 	args[11]= " ½ªÎ»         ";
 #endif
 
-
+/* 
+/* Modified by hiro-a@mars.dti.ne.jp 00/4/28 for JG-1.0
 	ret = menu(11,args,0);
+*/
+	ret = menu(12,args,0);
 
 	switch(ret) {
 	case 0:
diff -uNr netmaj.org/global.h netmaj/global.h
--- netmaj.org/global.h	Sat Aug 31 17:14:40 1996
+++ netmaj/global.h	Fri Apr 28 20:47:05 2000
@@ -40,8 +40,10 @@
 #define index 	strchr
 #define rindex 	strrchr
 #endif
+#if 0
 extern char *index();
 extern char *rindex();
+#endif
 
 
 extern FILE *plog;	/* protocol logging */
diff -uNr netmaj.org/kui/Imakefile netmaj/kui/Imakefile
--- netmaj.org/kui/Imakefile	Sat Jun 14 16:15:09 1997
+++ netmaj/kui/Imakefile	Fri Apr 28 21:41:46 2000
@@ -2,23 +2,24 @@
 /* This file is a part of KAN NetMaj, yet another netmaj xclient. */
 /*              Copyright (C) 1996 Ushio Yamamoto                 */
 /******************************************************************/
-INSTALLBINDIR=/usr/local/games
-INSTALLLIBDIR=/usr/local/games/lib/netmaj
+INSTALLBINDIR=/usr/games
+INSTALLLIBDIR=/usr/games/lib/netmaj
+XAPPLOADDIR=/usr/X11R6/lib/X11/ja_JP.ujis/app-defaults
 NMDIR = ..
 
 CC = gcc
 G = -g
 
 /* for Solaris */
-
+/*
 OS_CFLAGS = -O -DSYSV -DSVR4 -DUSE_RAND
 OTHERLIBS = -lsocket -lnsl
-
+*/
 
 /* for SunOS 4.x */
-/*
+
 OS_CFLAGS= -O -DDEF_OPTARG
-*/
+
 
 /* for HP-UX 9.x */
 /*
diff -uNr netmaj.org/kui/Makefile netmaj/kui/Makefile
--- netmaj.org/kui/Makefile	Thu Jan  1 09:00:00 1970
+++ netmaj/kui/Makefile	Fri Apr 28 21:42:26 2000
@@ -0,0 +1,778 @@
+# Makefile generated by imake - do not edit!
+# $TOG: imake.c /main/97 1997/06/20 20:23:51 kaleb $
+
+# ----------------------------------------------------------------------
+# Makefile generated from "Imake.tmpl" and <Imakefile>
+# $TOG: Imake.tmpl /main/245 1997/05/20 10:05:47 kaleb $
+#
+#
+#
+#
+# $XFree86: xc/config/cf/Imake.tmpl,v 3.32.2.12 1999/01/09 14:18:57 dawes Exp $
+# ----------------------------------------------------------------------
+
+all::
+
+.SUFFIXES: .i
+
+# $TOG: Imake.cf /main/28 1997/06/25 08:31:36 barstow $
+# $XFree86: xc/config/cf/Imake.cf,v 3.34.2.14 1999/07/29 09:22:23 hohndel Exp $
+
+# -----------------------------------------------------------------------
+# site-specific configuration parameters that need to come before
+# the platform-specific parameters - edit site.def to change
+
+# site:  $XConsortium: site.def /main/revisionist/4 1996/12/31 08:02:07 kaleb $
+# site:  $XFree86: xc/config/cf/site.def,v 3.17.2.1 1997/06/22 10:32:21 dawes Exp $
+
+# $XFree86: xc/config/cf/xf86site.def,v 3.101.2.36 1999/12/28 12:13:34 hohndel Exp $
+
+# ----------------------------------------------------------------------
+# platform-specific configuration parameters - edit linux.cf to change
+
+# platform:  $TOG: linux.cf /main/36 1997/06/16 22:21:03 kaleb $
+# platform:  $XFree86: xc/config/cf/linux.cf,v 3.57.2.19 1999/09/04 09:12:27 dawes Exp $
+
+# operating system:  Linux 2.2.14-1vl6 i686 [ELF] (2.2.14)
+# libc:	(6.1.2)
+# binutils:	(29)
+
+# $XConsortium: lnxLib.rules /main/13 1996/09/28 16:11:01 rws $
+# $XFree86: xc/config/cf/lnxLib.rules,v 3.28.2.4 1998/12/18 11:56:08 dawes Exp $
+
+# $XFree86: xc/config/cf/xfree86.cf,v 3.129.2.53 1999/12/10 12:38:13 hohndel Exp $
+
+# $XConsortium: xfree86.cf /main/34 1996/12/06 11:45:18 rws $
+
+LINKKITDIR = $(USRLIBDIR)/Server
+XF98LINKKITDIR = $(USRLIBDIR)/Server
+
+       XF86SRC = $(SERVERSRC)/hw/xfree86
+  XF86ACCELSRC = $(XF86SRC)/accel
+    XF86COMSRC = $(XF86SRC)/common
+ XF86CONFIGSRC = $(XF86COMSRC)
+     XF86HWSRC = $(XF86SRC)/common_hw
+     XF86OSSRC = $(XF86SRC)/os-support
+  VGADRIVERSRC = $(XF86SRC)/vga256/drivers
+VGA16DRIVERSRC = $(XF86SRC)/vga16/drivers
+ VGA2DRIVERSRC = $(XF86SRC)/vga2/drivers
+ MONODRIVERSRC = $(XF86SRC)/mono/drivers
+   S3DRIVERSRC = $(XF86SRC)/accel/s3/drivers
+  S3VDRIVERSRC = $(XF86SRC)/accel/s3_virge/drivers
+
+       XF68SRC = $(SERVERSRC)/hw/xfree68
+    XF68COMSRC = $(XF68SRC)/common
+ XF68CONFIGSRC = $(XF68COMSRC)
+     XF68OSSRC = $(XF68SRC)/os-support
+
+           XF98SRC = $(SERVERSRC)/hw/xfree98
+      XF98ACCELSRC = $(XF98SRC)/accel
+        XF98COMSRC = $(XF98SRC)/common
+     XF98CONFIGSRC = $(XF98COMSRC)
+         XF98HWSRC = $(XF98SRC)/common_hw/generic
+      XF98HWNECSRC = $(XF98SRC)/common_hw/nec
+    XF98HWPWSKBSRC = $(XF98SRC)/common_hw/pwskb
+     XF98HWPWLBSRC = $(XF98SRC)/common_hw/pwlb
+    XF98HWGA968SRC = $(XF98SRC)/common_hw/ga968
+         XF98OSSRC = $(XF98SRC)/os-support
+  XF98VGADRIVERSRC = $(XF98SRC)/vga256/drivers
+XF98VGA16DRIVERSRC = $(XF98SRC)/vga16/drivers
+ XF98VGA2DRIVERSRC = $(XF98SRC)/vga2/drivers
+ XF98MONODRIVERSRC = $(XF98SRC)/mono/drivers
+XF98NECS3DRIVERSRC = $(XF98SRC)/accel/s3nec/drivers
+XF98PWSKBDRIVERSRC = $(XF98SRC)/accel/s3pwskb/drivers
+ XF98PWLBDRIVERSRC = $(XF98SRC)/accel/s3pwlb/drivers
+XF98GA968DRIVERSRC = $(XF98SRC)/accel/s3ga968/drivers
+
+        XFREE86DOCDIR = $(DOCDIR)
+      XFREE86PSDOCDIR = $(DOCPSDIR)
+    XFREE86HTMLDOCDIR = $(DOCHTMLDIR)
+XFREE86JAPANESEDOCDIR = $(DOCDIR)/Japanese
+
+# $XConsortium: xf86.rules /main/9 1996/10/31 14:54:26 kaleb $
+# $XFree86: xc/config/cf/xf86.rules,v 3.16.2.3 1999/09/04 07:08:46 dawes Exp $
+
+# ----------------------------------------------------------------------
+# site-specific configuration parameters that go after
+# the platform-specific parameters - edit site.def to change
+
+# site:  $XConsortium: site.def /main/revisionist/4 1996/12/31 08:02:07 kaleb $
+# site:  $XFree86: xc/config/cf/site.def,v 3.17.2.1 1997/06/22 10:32:21 dawes Exp $
+
+# ---------------------------------------------------------------------
+# Imake rules for building libraries, programs, scripts, and data files
+# rules:  $TOG: Imake.rules /main/222 1997/07/17 20:04:40 kaleb $
+# rules:  $XFree86: xc/config/cf/Imake.rules,v 3.33.2.10 1998/11/04 10:53:01 dawes Exp $
+
+ _NULLCMD_ = @ echo -n
+
+TKLIBNAME = tk
+
+TKLIBDIR = /usr/lib
+
+TCLLIBNAME = tcl
+
+TCLIBDIR = /usr/lib
+
+JPTKLIBNAME =
+
+JPTKLIBDIR =
+
+JPTCLLIBNAME =
+
+JPTCLIBDIR =
+
+          PATHSEP = /
+            SHELL = /bin/sh
+
+              TOP = .
+      CURRENT_DIR = .
+
+            IMAKE = imake
+           DEPEND = gccmakedep
+        MKDIRHIER = mkdir -p
+    EXPORTLISTGEN =
+        CONFIGSRC = $(TOP)/config
+         IMAKESRC = $(CONFIGSRC)/imake
+        DEPENDSRC = $(CONFIGSRC)/util
+
+          INCROOT = /usr/X11R6/include
+        USRLIBDIR = /usr/X11R6/lib
+        VARLIBDIR = /var/lib
+         SHLIBDIR = /usr/X11R6/lib
+       LINTLIBDIR = $(USRLIBDIR)/lint
+          MANPATH = /usr/X11R6/man
+    MANSOURCEPATH = $(MANPATH)/man
+           MANDIR = $(MANSOURCEPATH)1
+        LIBMANDIR = $(MANSOURCEPATH)3
+       FILEMANDIR = $(MANSOURCEPATH)5
+
+               AR = ar clq
+  BOOTSTRAPCFLAGS =
+               CC = gcc
+               AS = as
+
+.SUFFIXES: .cc
+
+              CXX = c++
+          CXXFILT = c++filt
+           CXXLIB =
+    CXXDEBUGFLAGS = -O2 -fno-strength-reduce
+CXXDEPENDINCLUDES =
+ CXXEXTRA_DEFINES =
+CXXEXTRA_INCLUDES =
+   CXXSTD_DEFINES = -Dlinux -D__i386__ -D_POSIX_C_SOURCE=199309L -D_POSIX_SOURCE -D_XOPEN_SOURCE=500L -D_BSD_SOURCE -D_SVID_SOURCE $(CXXPROJECT_DEFINES)
+       CXXOPTIONS =
+      CXXINCLUDES = $(INCLUDES) $(TOP_INCLUDES) $(CXXEXTRA_INCLUDES)
+       CXXDEFINES = $(CXXINCLUDES) $(CXXSTD_DEFINES) $(THREADS_CXXDEFINES) $(CXXEXTRA_DEFINES) $(DEFINES)
+         CXXFLAGS = $(CXXDEBUGFLAGS) $(CXXOPTIONS) $(THREADS_CXXFLAGS) $(CXXDEFINES)
+
+         COMPRESS = compress
+          GZIPCMD = gzip
+              CPP = /lib/cpp $(STD_CPP_DEFINES)
+    PREPROCESSCMD = gcc -E $(STD_CPP_DEFINES)
+          INSTALL = install
+     INSTALLFLAGS = -c
+               LD = ld
+              LEX = flex -l
+           LEXLIB = -lfl
+             YACC = bison -y
+           CCYACC = bison -y
+             LINT = lint
+      LINTLIBFLAG = -C
+         LINTOPTS = -axz
+               LN = ln -s
+             MAKE = make
+               MV = mv -f
+               CP = cp
+
+           RANLIB = ranlib
+  RANLIBINSTFLAGS =
+
+               RM = rm -f
+        MANSUFFIX = 1x
+     LIBMANSUFFIX = 3x
+    FILEMANSUFFIX = 5x
+            TROFF = groff -Tps
+            NROFF = nroff
+         MSMACROS = -ms
+        MANMACROS = -man
+              TBL = tbl
+              EQN = eqn
+             NEQN = neqn
+              COL = col
+         COLFLAGS = -b
+
+            DVIPS = dvips
+            LATEX = latex
+
+     STD_INCLUDES =
+  STD_CPP_DEFINES = -traditional -Dlinux -D__i386__ -D_POSIX_C_SOURCE=199309L -D_POSIX_SOURCE -D_XOPEN_SOURCE=500L -D_BSD_SOURCE -D_SVID_SOURCE $(PROJECT_DEFINES)
+      STD_DEFINES = -Dlinux -D__i386__ -D_POSIX_C_SOURCE=199309L -D_POSIX_SOURCE -D_XOPEN_SOURCE=500L -D_BSD_SOURCE -D_SVID_SOURCE $(PROJECT_DEFINES)
+ EXTRA_LOAD_FLAGS =
+  EXTRA_LDOPTIONS =
+  EXTRA_LIBRARIES =
+             TAGS = ctags
+
+   PARALLELMFLAGS =
+
+    SHAREDCODEDEF =
+         SHLIBDEF =
+
+     SHLIBLDFLAGS = -shared
+
+         PICFLAGS = -fPIC
+
+      CXXPICFLAGS = -fPIC
+
+    PROTO_DEFINES = -DFUNCPROTO=15 -DNARROWPROTO
+
+     INSTPGMFLAGS = -s
+
+     INSTBINFLAGS = -m 0755
+     INSTUIDFLAGS = -m 4711
+     INSTLIBFLAGS = -m 0644
+     INSTINCFLAGS = -m 0444
+     INSTMANFLAGS = -m 0444
+     INSTDATFLAGS = -m 0444
+    INSTKMEMFLAGS = -m 4711
+
+      PROJECTROOT = /usr/X11R6
+
+      CDEBUGFLAGS = -O2 -fno-strength-reduce
+        CCOPTIONS =
+
+      ALLINCLUDES = $(INCLUDES) $(EXTRA_INCLUDES) $(TOP_INCLUDES) $(STD_INCLUDES)
+
+       ALLDEFINES = $(ALLINCLUDES) $(STD_DEFINES) $(EXTRA_DEFINES) $(PROTO_DEFINES) $(THREADS_DEFINES) $(DEFINES)
+           CFLAGS = $(CDEBUGFLAGS) $(CCOPTIONS) $(THREADS_CFLAGS) $(ALLDEFINES)
+        LINTFLAGS = $(LINTOPTS) -DLINT $(ALLDEFINES) $(DEPEND_DEFINES)
+         LDPRELIB = -L$(USRLIBDIR)
+        LDPOSTLIB =
+        LDOPTIONS = $(CDEBUGFLAGS) $(CCOPTIONS)  $(EXTRA_LDOPTIONS) $(THREADS_LDFLAGS) $(LOCAL_LDFLAGS) $(LDPRELIBS)
+     CXXLDOPTIONS = $(CXXDEBUGFLAGS) $(CXXOPTIONS) $(EXTRA_LDOPTIONS) $(THREADS_CXXLDFLAGS) $(LOCAL_LDFLAGS) $(LDPRELIBS)
+
+           LDLIBS = $(LDPOSTLIBS) $(THREADS_LIBS) $(SYS_LIBRARIES) $(EXTRA_LIBRARIES)
+
+           CCLINK = $(CC)
+
+          CXXLINK = $(CXX)
+
+     LDSTRIPFLAGS = -x
+   LDCOMBINEFLAGS = -r
+      DEPENDFLAGS =
+
+# Not sure this belongs here
+         TKLIBDIR = /usr/lib
+         TKINCDIR = /usr/include
+        TKLIBNAME = tk
+        TKLIBRARY = -L$(TKLIBDIR) -l$(TKLIBNAME)
+        TCLLIBDIR = /usr/lib
+        TCLINCDIR = /usr/include
+       TCLLIBNAME = tcl
+       TCLLIBRARY = -L$(TCLLIBDIR) -l$(TCLLIBNAME)
+       JPTKLIBDIR =
+       JPTKINCDIR =
+      JPTKLIBNAME =
+      JPTKLIBRARY = -L$(JPTKLIBDIR) -l$(JPTKLIBNAME)
+      JPTCLLIBDIR =
+      JPTCLINCDIR =
+     JPTCLLIBNAME =
+     JPTCLLIBRARY = -L$(JPTCLLIBDIR) -l$(JPTCLLIBNAME)
+
+        MACROFILE = linux.cf
+           RM_CMD = $(RM)
+
+    IMAKE_DEFINES =
+
+         IRULESRC = $(CONFIGDIR)
+
+        IMAKE_CMD = $(IMAKE) -DUseInstalled -I$(IRULESRC) $(IMAKE_DEFINES)
+
+     ICONFIGFILES = $(IRULESRC)/Imake.tmpl $(IRULESRC)/X11.tmpl 			$(IRULESRC)/site.def $(IRULESRC)/$(MACROFILE) 			$(IRULESRC)/xfree86.cf $(IRULESRC)/xf86.rules $(IRULESRC)/xf86site.def $(IRULESRC)/host.def $(EXTRA_ICONFIGFILES)
+
+# $TOG: X11.rules /main/4 1997/04/30 15:23:24 kaleb $
+#
+#
+#
+# $XFree86: xc/config/cf/X11.rules,v 1.1.1.1.2.4 1999/04/21 07:20:58 hohndel Exp $
+
+# ----------------------------------------------------------------------
+# X Window System Build Parameters and Rules
+# $TOG: X11.tmpl /main/292 1997/05/20 10:05:59 kaleb $
+#
+#
+#
+#
+# $XFree86: xc/config/cf/X11.tmpl,v 1.8.2.9 1998/12/30 10:04:09 dawes Exp $
+
+CONNECTION_FLAGS = -DUNIXCONN -DTCPCONN -DHAS_STICKY_DIR_BIT
+
+# -----------------------------------------------------------------------
+# X Window System make variables; these need to be coordinated with rules
+
+             XTOP = $(TOP)
+           BINDIR = /usr/X11R6/bin
+     BUILDINCROOT = $(TOP)/exports
+      BUILDINCDIR = $(BUILDINCROOT)/include
+      BUILDINCTOP = ../..
+      BUILDLIBDIR = $(TOP)/exports/lib
+      BUILDLIBTOP = ../..
+      BUILDBINDIR = $(TOP)/exports/bin
+      BUILDBINTOP = ../..
+    XBUILDINCROOT = $(XTOP)/exports
+     XBUILDINCDIR = $(XBUILDINCROOT)/include/X11
+     XBUILDINCTOP = ../../..
+     XBUILDBINDIR = $(XBUILDINCROOT)/bin
+           INCDIR = $(INCROOT)
+           ADMDIR = /usr/adm
+           LIBDIR = $(USRLIBDIR)/X11
+   TOP_X_INCLUDES =
+
+           VARDIR = /var/X11
+
+           DOCDIR = $(LIBDIR)/doc
+       DOCHTMLDIR = $(DOCDIR)/html
+         DOCPSDIR = $(DOCDIR)/PostScript
+          FONTDIR = $(LIBDIR)/fonts
+         XINITDIR = $(LIBDIR)/xinit
+           XDMDIR = $(LIBDIR)/xdm
+        XDMVARDIR = $(VARLIBDIR)/xdm
+           TWMDIR = $(LIBDIR)/twm
+           XSMDIR = $(LIBDIR)/xsm
+           NLSDIR = $(LIBDIR)/nls
+       XLOCALEDIR = $(LIBDIR)/locale
+        PEXAPIDIR = $(LIBDIR)/PEX
+      LBXPROXYDIR = $(LIBDIR)/lbxproxy
+  PROXYMANAGERDIR = $(LIBDIR)/proxymngr
+        XPRINTDIR = $(LIBDIR)
+      XAPPLOADDIR = $(LIBDIR)/app-defaults
+       FONTCFLAGS = -t
+
+     INSTAPPFLAGS = $(INSTDATFLAGS)
+
+              RGB = rgb
+            FONTC = bdftopcf
+        MKFONTDIR = mkfontdir
+
+       DOCUTILSRC = $(XTOP)/doc/util
+        CLIENTSRC = $(TOP)/clients
+          DEMOSRC = $(TOP)/demos
+       XDOCMACROS = $(DOCUTILSRC)/macros.t
+       XIDXMACROS = $(DOCUTILSRC)/indexmacros.t
+       PROGRAMSRC = $(TOP)/programs
+           LIBSRC = $(XTOP)/lib
+          FONTSRC = $(XTOP)/fonts
+       INCLUDESRC = $(BUILDINCROOT)/include
+      XINCLUDESRC = $(INCLUDESRC)/X11
+        SERVERSRC = $(XTOP)/programs/Xserver
+       CONTRIBSRC = $(XTOP)/../contrib
+   UNSUPPORTEDSRC = $(XTOP)/unsupported
+           DOCSRC = $(XTOP)/doc
+           RGBSRC = $(XTOP)/programs/rgb
+      BDFTOPCFSRC = $(PROGRAMSRC)/bdftopcf
+     MKFONTDIRSRC = $(PROGRAMSRC)/mkfontdir
+    FONTSERVERSRC = $(PROGRAMSRC)/xfs
+       FONTINCSRC = $(XTOP)/include/fonts
+        EXTINCSRC = $(XTOP)/include/extensions
+     TRANSCOMMSRC = $(LIBSRC)/xtrans
+   TRANS_INCLUDES = -I$(TRANSCOMMSRC)
+
+       XENVLIBDIR = $(USRLIBDIR)
+   CLIENTENVSETUP = LD_LIBRARY_PATH=$(XENVLIBDIR)
+
+# $XConsortium: lnxLib.tmpl,v 1.5 95/01/11 21:44:44 kaleb Exp $
+# $XFree86: xc/config/cf/lnxLib.tmpl,v 3.9 1996/02/24 04:32:52 dawes Exp $
+
+          XLIBSRC = $(LIBSRC)/X11
+
+SOXLIBREV = 6.1
+DEPXONLYLIB =
+XONLYLIB =  -lX11
+
+LINTXONLY = $(LINTLIBDIR)/llib-lX11.ln
+
+         XLIBONLY = $(XONLYLIB)
+
+      XEXTLIBSRC = $(LIBSRC)/Xext
+
+SOXEXTREV = 6.3
+DEPEXTENSIONLIB =
+EXTENSIONLIB =  -lXext
+
+LINTEXTENSION = $(LINTLIBDIR)/llib-lXext.ln
+
+LINTEXTENSIONLIB = $(LINTEXTENSION)
+          DEPXLIB = $(DEPEXTENSIONLIB) $(DEPXONLYLIB)
+             XLIB = $(EXTENSIONLIB) $(XONLYLIB)
+         LINTXLIB = $(LINTXONLYLIB)
+
+    XSSLIBSRC = $(LIBSRC)/Xss
+
+DEPXSSLIB = $(USRLIBDIR)/libXss.a
+XSSLIB =  -lXss
+
+LINTXSS = $(LINTLIBDIR)/llib-lXss.ln
+
+    XXF86MISCLIBSRC = $(LIBSRC)/Xxf86misc
+
+DEPXXF86MISCLIB = $(USRLIBDIR)/libXxf86misc.a
+XXF86MISCLIB =  -lXxf86misc
+
+LINTXXF86MISC = $(LINTLIBDIR)/llib-lXxf86misc.ln
+
+    XXF86VMLIBSRC = $(LIBSRC)/Xxf86vm
+
+DEPXXF86VMLIB = $(USRLIBDIR)/libXxf86vm.a
+XXF86VMLIB =  -lXxf86vm
+
+LINTXXF86VM = $(LINTLIBDIR)/llib-lXxf86vm.ln
+
+    XXF86DGALIBSRC = $(LIBSRC)/Xxf86dga
+
+DEPXXF86DGALIB = $(USRLIBDIR)/libXxf86dga.a
+XXF86DGALIB =  -lXxf86dga
+
+LINTXXF86DGA = $(LINTLIBDIR)/llib-lXxf86dga.ln
+
+    XDPMSLIBSRC = $(LIBSRC)/Xdpms
+
+DEPXDPMSLIB = $(USRLIBDIR)/libXdpms.a
+XDPMSLIB =  -lXdpms
+
+LINTXDPMS = $(LINTLIBDIR)/llib-lXdpms.ln
+
+    XFONTCACHELIBSRC = $(LIBSRC)/Xfontcache
+
+DEPXFONTCACHELIB = $(USRLIBDIR)/libXfontcache.a
+XFONTCACHELIB =  -lXfontcache
+
+LINTXFONTCACHE = $(LINTLIBDIR)/llib-lXfontcache.ln
+
+         XAUTHSRC = $(LIBSRC)/Xau
+
+DEPXAUTHLIB = $(USRLIBDIR)/libXau.a
+XAUTHLIB =  -lXau
+
+LINTXAUTH = $(LINTLIBDIR)/llib-lXau.ln
+
+      XDMCPLIBSRC = $(LIBSRC)/Xdmcp
+
+DEPXDMCPLIB = $(USRLIBDIR)/libXdmcp.a
+XDMCPLIB =  -lXdmcp
+
+LINTXDMCP = $(LINTLIBDIR)/llib-lXdmcp.ln
+
+           XMUSRC = $(LIBSRC)/Xmu
+
+SOXMUREV = 6.0
+DEPXMULIB =
+XMULIB =  -lXmu
+
+LINTXMU = $(LINTLIBDIR)/llib-lXmu.ln
+
+       OLDXLIBSRC = $(LIBSRC)/oldX
+
+DEPOLDXLIB = $(USRLIBDIR)/liboldX.a
+OLDXLIB =  -loldX
+
+LINTOLDX = $(LINTLIBDIR)/llib-loldX.ln
+
+         XPLIBSRC = $(LIBSRC)/Xp
+
+SOXPREV = 6.2
+DEPXPLIB =
+XPLIB =  -lXp
+
+LINTXP = $(LINTLIBDIR)/llib-lXp.ln
+
+       TOOLKITSRC = $(LIBSRC)/Xt
+
+SOXTREV = 6.0
+DEPXTOOLONLYLIB =
+XTOOLONLYLIB =  -lXt
+
+LINTXTOOLONLY = $(LINTLIBDIR)/llib-lXt.ln
+
+      DEPXTOOLLIB = $(DEPXTOOLONLYLIB) $(DEPSMLIB) $(DEPICELIB)
+         XTOOLLIB = $(XTOOLONLYLIB) $(SMLIB) $(ICELIB)
+     LINTXTOOLLIB = $(LINTXTOOLONLYLIB)
+
+       XALIBSRC = $(LIBSRC)/Xa
+
+SOXAREV = 1.0
+DEPXALIB =
+XALIB =  -lXa
+
+LINTXA = $(LINTLIBDIR)/llib-lXa.ln
+
+       AWIDGETSRC = $(LIBSRC)/Xaw
+
+SOXAWREV = 6.1
+DEPXAWLIB =
+XAWLIB =  -lXaw
+
+LINTXAW = $(LINTLIBDIR)/llib-lXaw.ln
+
+         XILIBSRC = $(LIBSRC)/Xi
+
+SOXINPUTREV = 6.0
+DEPXILIB =
+XILIB =  -lXi
+
+LINTXI = $(LINTLIBDIR)/llib-lXi.ln
+
+      XTESTLIBSRC = $(LIBSRC)/Xtst
+
+SOXTESTREV = 6.1
+DEPXTESTLIB =
+XTESTLIB =  -lXtst
+
+LINTXTEST = $(LINTLIBDIR)/llib-lXtst.ln
+
+        PEXLIBSRC = $(LIBSRC)/PEX5
+
+SOPEXREV = 6.0
+DEPPEXLIB =
+PEXLIB =  -lPEX5
+
+LINTPEX = $(LINTLIBDIR)/llib-lPEX5.ln
+
+        XIELIBSRC = $(LIBSRC)/XIE
+
+SOXIEREV = 6.0
+DEPXIELIB =
+XIELIB =  -lXIE
+
+LINTXIE = $(LINTLIBDIR)/llib-lXIE.ln
+
+      PHIGSLIBSRC = $(LIBSRC)/PHIGS
+
+DEPPHIGSLIB = $(USRLIBDIR)/libphigs.a
+PHIGSLIB =  -lphigs
+
+LINTPHIGS = $(LINTLIBDIR)/llib-lphigs.ln
+
+DEPXBSDLIB = $(USRLIBDIR)/libXbsd.a
+XBSDLIB =  -lXbsd
+
+LINTXBSD = $(LINTLIBDIR)/llib-lXbsd.ln
+
+           ICESRC = $(LIBSRC)/ICE
+
+SOICEREV = 6.3
+DEPICELIB =
+ICELIB =  -lICE
+
+LINTICE = $(LINTLIBDIR)/llib-lICE.ln
+
+            SMSRC = $(LIBSRC)/SM
+
+SOSMREV = 6.0
+DEPSMLIB =
+SMLIB =  -lSM
+
+LINTSM = $(LINTLIBDIR)/llib-lSM.ln
+
+           XKEYSRC = $(LIBSRC)/Xkey
+
+SOXKEYREV = 6.0
+DEPXKEYLIB =
+XKEYLIB =  -lXkey
+
+LINTXKEY = $(LINTLIBDIR)/llib-lXkey.ln
+
+         FSLIBSRC = $(LIBSRC)/FS
+
+DEPFSLIB = $(USRLIBDIR)/libFS.a
+FSLIB =  -lFS
+
+LINTFS = $(LINTLIBDIR)/llib-lFS.ln
+
+         FONTLIBSRC = $(LIBSRC)/font
+
+SOFONTREV = 1.3
+DEPFONTLIB =
+FONTLIB = -L$(FREETYPELIBDIR) -L$(FONTLIBSRC)  -lfont
+
+LINTFONT = $(LINTLIBDIR)/llib-lfont.ln
+
+          XPMLIBSRC = $(LIBSRC)/Xpm
+
+DEPXPMLIB = $(USRLIBDIR)/libXpm.a
+XPMLIB =  -lXpm
+
+LINTXPM = $(LINTLIBDIR)/llib-lXpm.ln
+
+    XKBFILELIBSRC = $(LIBSRC)/xkbfile
+
+DEPXKBFILELIB = $(USRLIBDIR)/libxkbfile.a
+XKBFILELIB =  -lxkbfile
+
+LINTXKBFILE = $(LINTLIBDIR)/llib-lxkbfile.ln
+
+     XKBCOMPCMD = xkbcomp
+
+    XKBUILIBSRC = $(LIBSRC)/xkbui
+
+DEPXKBUILIB = $(USRLIBDIR)/libxkbui.a
+XKBUILIB =  -lxkbui
+
+LINTXKBUI = $(LINTLIBDIR)/llib-lxkbui.ln
+
+          DEPLIBS = $(DEPXAWLIB) $(DEPXMULIB) $(DEPXTOOLLIB) $(DEPXLIB)
+
+         DEPLIBS1 = $(DEPLIBS)
+         DEPLIBS2 = $(DEPLIBS)
+         DEPLIBS3 = $(DEPLIBS)
+         DEPLIBS4 = $(DEPLIBS)
+         DEPLIBS5 = $(DEPLIBS)
+         DEPLIBS6 = $(DEPLIBS)
+         DEPLIBS7 = $(DEPLIBS)
+         DEPLIBS8 = $(DEPLIBS)
+         DEPLIBS9 = $(DEPLIBS)
+         DEPLIBS10 = $(DEPLIBS)
+
+XMULIBONLY = -lXmu
+XMULIB = $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
+
+        CONFIGDIR = $(LIBDIR)/config
+
+    USRLIBDIRPATH = $(USRLIBDIR)
+        LDPRELIBS = -L$(USRLIBDIR)
+       LDPOSTLIBS =
+     TOP_INCLUDES = -I$(INCROOT) $(TOP_X_INCLUDES)
+  PROJECT_DEFINES =
+
+CXXPROJECT_DEFINES =
+
+FREETYPELIBNAME = ttf
+
+FREETYPELIBDIR = /usr/lib
+
+# ----------------------------------------------------------------------
+# start of Imakefile
+
+INSTALLBINDIR=/usr/games
+INSTALLLIBDIR=/usr/games/lib/netmaj
+XAPPLOADDIR=/usr/X11R6/lib/X11/ja_JP.ujis/app-defaults
+NMDIR = ..
+
+CC = gcc
+G = -g
+
+OS_CFLAGS= -O -DDEF_OPTARG
+
+SRCS = xui.c pixmap.c drwfnc.c res.c board.c yaku.c msg.c help.c init.c parts.c convkinput.c
+NM1SRC = netmaj1.c
+NMCLSRC = client.c
+
+OBJS = xui.o pixmap.o drwfnc.o res.o board.o yaku.o msg.o help.o init.o parts.o convkinput.o
+NM1OBJ = netmaj1.o
+NMCLOBJ = client.o
+
+EXTRA_DEFINES = $(XCFLAGS) $(CCFLAGS) $(G) $(OS_CFLAGS) -DX11 	-I$(NMDIR) -I$(NMDIR)/lib  -DAPPDEFPTH="\"$(XAPPLOADDIR)\""
+
+EXTRA_LIBRARIES = $(NMDIR)/libnetmaj.a $(SS_LIB)
+EXTRA_LDOPTIONS = -L$(NMDIR)/lib
+
+SYS_LIBRARIES = -lXpm -lX11 $(OTHERLIBS)
+
+all:: knetmaj1 knetmajcl
+
+$(NM1SRC):   $(NMDIR)/$(NM1SRC)
+	$(RM) $@
+	$(LN) $? $@
+
+includes:: $(NM1SRC)
+
+depend:: $(NM1SRC)
+
+clean::
+	$(RM) $(NM1SRC)
+
+$(NMCLSRC):   $(NMDIR)/$(NMCLSRC)
+	$(RM) $@
+	$(LN) $? $@
+
+includes:: $(NMCLSRC)
+
+depend:: $(NMCLSRC)
+
+clean::
+	$(RM) $(NMCLSRC)
+
+knetmaj1: $(OBJS) $(NM1OBJ)
+	$(RM) $@
+	$(CCLINK) -o $@ $(LDOPTIONS) $(OBJS) $(NM1OBJ)  $(LDLIBS)  $(EXTRA_LOAD_FLAGS)
+
+clean::
+	$(RM) knetmaj1
+
+knetmajcl: $(OBJS) $(NMCLOBJ)
+	$(RM) $@
+	$(CCLINK) -o $@ $(LDOPTIONS) $(OBJS) $(NMCLOBJ)  $(LDLIBS)  $(EXTRA_LOAD_FLAGS)
+
+clean::
+	$(RM) knetmajcl
+
+install:: knetmaj1
+	@if [ -d $(DESTDIR)$(INSTALLBINDIR) ]; then set +x; \
+	else (set -x; $(MKDIRHIER) $(DESTDIR)$(INSTALLBINDIR)); fi
+	$(INSTALL) $(INSTALLFLAGS) $(INSTPGMFLAGS)  knetmaj1 $(DESTDIR)$(INSTALLBINDIR)/knetmaj1
+
+install:: knetmajcl
+	@if [ -d $(DESTDIR)$(INSTALLBINDIR) ]; then set +x; \
+	else (set -x; $(MKDIRHIER) $(DESTDIR)$(INSTALLBINDIR)); fi
+	$(INSTALL) $(INSTALLFLAGS) $(INSTPGMFLAGS)  knetmajcl $(DESTDIR)$(INSTALLBINDIR)/knetmajcl
+
+install:: Knetmaj.ad
+	@if [ -d $(DESTDIR)$(XAPPLOADDIR) ]; then set +x; \
+	else (set -x; $(MKDIRHIER) $(DESTDIR)$(XAPPLOADDIR)); fi
+	$(INSTALL) $(INSTALLFLAGS) $(INSTAPPFLAGS) Knetmaj.ad $(DESTDIR)$(XAPPLOADDIR)/Knetmaj
+
+# ----------------------------------------------------------------------
+# common rules for all Makefiles - do not edit
+
+.c.i:
+	$(RM) $@
+	 $(CC) -E $(CFLAGS) $(_NOOP_) $*.c > $@
+
+emptyrule::
+
+clean::
+	$(RM) *.CKP *.ln *.BAK *.bak *.o core errs ,* *~ *.a .emacs_* tags TAGS make.log MakeOut  "#"*
+
+Makefile::
+	-@if [ -f Makefile ]; then set -x; \
+	$(RM) Makefile.bak; $(MV) Makefile Makefile.bak; \
+	else exit 0; fi
+	$(IMAKE_CMD) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR)
+
+tags::
+	$(TAGS) -w *.[ch]
+	$(TAGS) -xw *.[ch] > TAGS
+
+man_keywords::
+
+# ----------------------------------------------------------------------
+# empty rules for directories that do not have SUBDIRS - do not edit
+
+install::
+	@echo "install in $(CURRENT_DIR) done"
+
+install.man::
+	@echo "install.man in $(CURRENT_DIR) done"
+
+install.linkkit::
+	@echo "install.linkkit in $(CURRENT_DIR) done"
+
+Makefiles::
+
+includes::
+
+depend::
+
+# ----------------------------------------------------------------------
+# dependencies generated by makedepend
+
diff -uNr netmaj.org/xui/src/int/expr.c netmaj/xui/src/int/expr.c
--- netmaj.org/xui/src/int/expr.c	Thu Aug  1 07:48:31 1996
+++ netmaj/xui/src/int/expr.c	Fri Apr 28 20:47:05 2000
@@ -364,12 +364,14 @@
 
 
 /** print **/
-static FILE *fp = stderr;
+static FILE *fp = NULL;
 
 void
 expr_print (p)
      pointer p;
 {
+  if (fp == NULL)
+    fp = stderr;
   switch (xid (p))
     {
     case id_expr:
diff -uNr netmaj.org/xui/src/int/interror.c netmaj/xui/src/int/interror.c
--- netmaj.org/xui/src/int/interror.c	Thu Aug  1 07:48:38 1996
+++ netmaj/xui/src/int/interror.c	Fri Apr 28 20:47:05 2000
@@ -93,7 +93,7 @@
 #define LX  "%x"
 #endif
 
-static FILE *outfp = stderr;
+static FILE *outfp = NULL;
 
 static char *
 message (msg, argp)
@@ -102,7 +102,9 @@
 {
   va_list args = *argp;
   char *start;
-
+  
+  if (outfp == NULL)
+    outfp = stderr;
   for (;;)
     {
       if (*msg == '\0')
diff -uNr netmaj.org/xui/src/int/readexpr.c netmaj/xui/src/int/readexpr.c
--- netmaj.org/xui/src/int/readexpr.c	Thu Aug  1 07:48:48 1996
+++ netmaj/xui/src/int/readexpr.c	Fri Apr 28 20:47:05 2000
@@ -36,7 +36,7 @@
 #include "nu.h"
 
 static integer_t inputc (void);
-static FILE *inputfp = stdin;
+static FILE *inputfp = NULL;
 
 void 
 nu_set_input (fp)
@@ -48,6 +48,8 @@
 static integer_t
 inputc ()
 {
+  if (inputfp == NULL)
+    inputfp = stdin;
   return getc (inputfp);
 }
 
diff -uNr netmaj.org/xui/src/util/error.c netmaj/xui/src/util/error.c
--- netmaj.org/xui/src/util/error.c	Thu Aug  1 07:49:10 1996
+++ netmaj/xui/src/util/error.c	Fri Apr 28 20:47:05 2000
@@ -52,7 +52,7 @@
 #define LX  "%x"
 #endif
 
-static FILE *outfp = stderr;
+static FILE *outfp = NULL;
 
 static char *
 message (msg, argp)
@@ -62,6 +62,8 @@
   va_list args = *argp;
   char *start;
 
+  if (outfp == NULL)
+    outfp = stderr;
   for (;;)
     {
       if (*msg == '\0')
diff -uNr netmaj.org/xui/src/xui/pfinfo.c netmaj/xui/src/xui/pfinfo.c
--- netmaj.org/xui/src/xui/pfinfo.c	Thu Aug  1 07:50:02 1996
+++ netmaj/xui/src/xui/pfinfo.c	Fri Apr 28 20:47:05 2000
@@ -45,7 +45,7 @@
 
 struct playerinfo playerinfo;
 
-#if sparc
+#if 1
 #include <alloca.h>
 #define allocafree(p)  0
 #else
